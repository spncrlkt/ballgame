# Test: Basic shooting
# Verifies player can charge and release a shot

name = "Basic shot"
description = "Player charges and releases a shot, ball enters InFlight state"

[setup]
level = "test_flat_floor"

# Floor is at y=-450, spawn at -350 (100 above floor)
[[setup.entities]]
type = "player"
id = "shooter"
team = "left"
x = 0.0
y = -350.0
holding_ball = true

[[input]]
frame = 10
shooter = { throw_held = true }

[[input]]
frame = 40
shooter = { throw_held = false }

[[expect.sequence]]
event = "ShotStart"
player = "shooter"
frame_min = 5
frame_max = 15

[[expect.sequence]]
event = "ShotRelease"
player = "shooter"
frame_min = 35
frame_max = 50

[[expect.state]]
after_frame = 60
checks = [
    "shooter.holding_ball = false",
    "ball.state = InFlight",
]
