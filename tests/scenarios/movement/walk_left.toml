# Test: Player walks left
# Verifies basic horizontal movement works in both directions
#
# FAIL conditions this test catches:
# - Movement system not working: player stays at x=0
# - Velocity not being applied: position changes but velocity_x = 0
# - Wrong direction: player moves right instead of left

name = "Walk left"
description = "Player moves left when move_left input is held"

[setup]
level = "test_flat_floor"

# Floor is at y=-450, so spawn at -350 (100 above floor)
[[setup.entities]]
type = "player"
id = "p1"
team = "left"
x = 0.0
y = -350.0

# Start moving left immediately
[[input]]
frame = 0
p1 = { move_left = true }

# Stop at frame 60 (1 second)
[[input]]
frame = 60
p1 = { move_left = false }

# Check at frame 30 (mid-movement) - should be moving and have velocity
[[expect.state]]
after_frame = 30
checks = [
    "p1.x < -50",            # Should have moved left significantly
    "p1.velocity_x < -100",  # Should have negative velocity (moving left)
]

# Check at frame 60 (end of movement) - should have traveled far
[[expect.state]]
after_frame = 60
checks = [
    "p1.x < -200",           # Should have covered significant distance
]
