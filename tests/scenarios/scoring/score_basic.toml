# Test: Basic scoring
# Verifies ball entering basket scores a goal
#
# This is a FAIL-verification test:
# - When scoring detection works: ball in basket → score increases → PASS
# - When broken: ball in basket but score stays 0 → FAIL

name = "Basic score"
description = "Ball placed inside basket triggers goal"

[setup]
level = "test_shooting_range"
# Shooting range: basket_height=150, basket_push_in=40
# ARENA_FLOOR_Y = -450
# Basket center y = -450 + 150 = -300
# Right basket x = 780 - 40 = 740 (wall_inner=780)
# Basket bounds: x: 710-770, y: -340 to -260

# Spawn ball directly inside the right basket
# This tests scoring detection without relying on shot variance
[[setup.entities]]
type = "ball"
x = 740.0
y = -300.0
velocity_x = 0.0
velocity_y = 0.0

# Need a player to attribute the score to (left team scores on right basket)
[[setup.entities]]
type = "player"
id = "p1"
team = "left"
x = 0.0
y = -350.0

[[expect.state]]
after_frame = 10
checks = [
    "score.left = 1",
]
