# 2v2 Update - Planning & Notes

*This document consolidates all information about upgrading from 1v1 to full 2v2 gameplay.*

---

## Current State

The game is **described as 2v2** but currently only has **2 players** (1v1 with AI opponent).

**What exists:**
- Team system (`Team::Left`, `Team::Right`)
- 2 baskets (left and right)
- 2 player spawns (one per team)
- AI can control either or both players
- Observer mode (both players AI-controlled)

**What's missing for true 2v2:**
- 4 player entities
- 2 players per team
- Team-based spawning/respawning
- Team coordination AI
- Input mapping for 4 controllers/keyboard splits

---

## Milestones Reference

From `milestones.md` V1/Beyond section:

```
**Multiplayer:**
- [ ] 1v1 local multiplayer
- [ ] 4-player support
- [ ] Netcode architecture
```

**Dependency chain:** The full 2v2 experience is a V1 feature, blocked by:
1. MVP (AI + movement feel good)
2. V0 (polish, win conditions, game flow)
3. Then V1 (multiplayer)

---

## Technical Considerations

### Entity Architecture

**Current:**
- 2 `Player` entities with `Team` component
- Human controls one, AI controls other

**For 2v2:**
- 4 `Player` entities (2 per team)
- Each needs `Team`, `PlayerIndex` (0-3), `InputState`
- Spawn positions: team-based, staggered

### Input Mapping

**Options for 4 players:**

| Mode | P1 | P2 | P3 | P4 |
|------|----|----|----|----|
| 4 controllers | Pad 0 | Pad 1 | Pad 2 | Pad 3 |
| 2 controllers + keyboard | Pad 0 | Pad 1 | WASD | Arrows |
| Keyboard only | WASD | IJKL | Arrows | Numpad |

### AI Considerations

**Team coordination needed:**
- Don't both chase ball
- One attack, one defend
- Pass to teammate?
- Communicate about steals

### Netcode (if online)

See `milestones.md` decision doc:
> **Netcode architecture** - Required before multiplayer (V1)

Options to research:
- Rollback netcode (fighting game style)
- Lockstep (deterministic)
- Client-server with prediction

---

## Open Questions

- [ ] Do we support passing between teammates?
- [ ] How does stealing work with 4 players?
- [ ] Do we need team-based scoring UI?
- [ ] Should teams have different spawn positions per level?
- [ ] How do we handle team collisions? (teammates can't block each other?)

---

## Notes

*Add your notes here for next session...*




